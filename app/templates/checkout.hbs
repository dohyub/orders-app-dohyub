<img class="uk-margin-bottom uk-margin-top uk-align-center" width="140" height="120" src="/images/9ple BI_0607.png" alt="9ple logo">
<div class="uk-margin-medium-top">
  <ul class="uk-child-width-expand" uk-tab>
    <li class="uk-disabled"><a>cart</a></li>
    {{#link-to 'checkout' tagName="li" activeClass="uk-active"}}
      <a>checkout</a>
    {{/link-to}}
    {{#link-to 'order' tagName="li" activeClass="uk-active"}}
      <a>order</a>
    {{/link-to}}
  </ul>
</div>
<div class="uk-text-bold uk-text-center uk-text-lead uk-margin-bottom">Checkout</div>
<div uk-grid>
  <div class="uk-width-3-5">
    <div class="uk-box-shadow-small uk-padding-small uk-margin-bottom">
      <span class="uk-text-lead">Payment Information</span>
      <a {{action 'inputPayment'}} class="uk-align-right uk-text-primary uk-margin-small-bottom" uk-icon="icon: plus-circle"></a>
      <div class="uk-width-small uk-margin-small-top">
        <select class="uk-select" onchange={{action "selectPayment" value="target.value"}}>
          <option disabled selected> -- Card select -- </option>
          {{#each model as |m|}}
            <option value={{m}}>{{m}}</option>
          {{/each}}
        </select>
      </div>
      {{#if selectedPayment}}
        <div class="uk-grid-small uk-margin-small-top" uk-grid>
          <div class="uk-width-1-3">
            <span>Lee Do Hyubv</span>        
          </div>
          <div class="uk-width-1-3">
            <span>XXXX6694</span>
          </div>
          <div class="uk-width-1-3">
            <a href="#modal-payment-delete" uk-toggle uk-icon="icon: close"></a>
          </div>
        </div>
      {{/if}}
      {{#if inputPaymentView}}
        <form class="uk-margin-top" {{action 'createPayment' number cvc zipcode name month year on='submit'}}>
          <div class="uk-grid-small" uk-grid>
            <div class="uk-width-1-3">
              <span class="uk-text-small">Number</span>
              {{input class="uk-input" type="text" value=number}}
            </div>
            <div class="uk-width-1-3">
              <span class="uk-text-small">CVC</span>
              {{input class="uk-input" type="text" value=cvc}}
            </div>
            <div class="uk-width-1-3">
              <span class="uk-text-small">Zipcode</span>
              {{input class="uk-input" type="text" value=zipcode}}
            </div>
          </div>
          <div class="uk-grid-small" uk-grid>
            <div class="uk-width-1-3">
              <span class="uk-text-small">Name on card</span>
              {{input class="uk-input" type="text" value=name}}
            </div>
            <div class="uk-width-1-3">
              <span class="uk-text-small">MM</span>
              {{input class="uk-input" type="text" value=month}}
            </div>
            <div class="uk-width-1-3">
              <span class="uk-text-small">YY</span>
              {{input class="uk-input" type="text" value=year}}
            </div>
          </div>
          <div class="uk-margin-small-top uk-text-center">
            <button class="uk-button uk-button-default uk-text-primary">save</button>
            <button {{action 'inputPaymentClose'}} class="uk-button uk-button-default uk-text-danger">cancel</button>
          </div>      
        </form>
      {{/if}}
    </div>

    <div class="uk-box-shadow-small uk-padding-small">
      <span class="uk-text-lead">Shipping Address</span>
      <a {{action 'inputAddress'}} class="uk-align-right uk-text-primary uk-margin-small-bottom" uk-icon="icon: plus-circle"></a>
      <ul uk-accordion>
        {{#each model.shippings as |address index|}}
          <li class={{unless index 'uk-open'}} {{action 'setShipping' address}}>
            <a class="uk-accordion-title" href="#">{{address.fullName}}</a>
            <div class="uk-accordion-content" uk-grid>
              <p class="uk-width-4-5">{{address.fullAddress}}</p>
              <a class="uk-width-1-5" href="#modal-address-delete" uk-toggle uk-icon="icon: close"></a>
            </div>
          </li>
        {{/each}}
      </ul>
      {{#if inputAddressView}}
        <form class="uk-margin-top" {{action 'createAddress' firstName lastName street1 street2 city state zipcode country phoneNumber on='submit'}}>
          <div class="uk-grid-small" uk-grid>
            <div class="uk-width-1-2">
              <span class="uk-text-small">First name</span>
              {{input class="uk-input" type="text" value=firstName}}
            </div>
            <div class="uk-width-1-2">
              <span class="uk-text-small">Last name</span>
              {{input class="uk-input" type="text" value=lastName}}
            </div>
          </div>
          <div>
            <span class="uk-text-small">Street1</span>
            {{input class="uk-input" type="text" value=street1}}
          </div>
          <div>
            <span class="uk-text-small">Street2</span>
            {{input class="uk-input" type="text" value=street2}}
          </div>
          <div class="uk-grid-small" uk-grid>
            <div class="uk-width-1-2">
              <span class="uk-text-small">City</span>
              {{input class="uk-input" type="text" value=city}}
            </div>
            <div class="uk-width-1-2">
              <span class="uk-text-small">State</span>
              {{input class="uk-input" type="text" value=state}}
            </div>
          </div>
          <div class="uk-grid-small" uk-grid>
            <div class="uk-width-1-2">
              <span class="uk-text-small">Zip code</span>
              {{input class="uk-input" type="text" value=zipcode}}
            </div>
            <div class="uk-width-1-2">
              <span class="uk-text-small">Country</span>
              {{input class="uk-input" type="text" value=country}}
            </div>
          </div>
          <div>
            <span class="uk-text-small">Phone Number</span>
            {{input class="uk-input" type="text" value=phoneNumber}}
          </div>
          <div class="uk-margin-small-top uk-text-center">
            <button class="uk-button uk-button-default uk-text-primary">save</button>
            <button {{action 'inputAddressClose'}} class="uk-button uk-button-default uk-text-danger">cancel</button>
          </div>      
        </form>
      {{/if}}
    </div>
    
    <hr class="uk-divider-icon">
    <div class="uk-box-shadow-small uk-padding-small uk-margin-bottom">
      <span class="uk-text-lead">Review Items</span>
      {{#with session.currentUser.cart as |cart|}}
      {{#each cart.metaCartItems as |item|}}
        <div class="uk-grid-small" uk-grid>
          <div class="uk-width-auto">
            <img class="uk-border-circle" width="60" height="60" src={{item.image}}>
            <img class="uk-align-center uk-margin-small-top" width="60" height="20" src="/images/{{item.market}}.svg">
          </div>
          <div class="uk-width-expand">
            <a href={{item.linkToMarket}} target="_blank">
              <p class="uk-card-title uk-margin-remove-bottom"><h6>{{item.title}}</h6></p>
            </a>
            <div class="uk-grid-small" uk-grid>
              <div class="uk-width-auto">
                <b>By {{item.manufacturer}}</b>  
              </div>
              <div class="uk-width-expand uk-text-right" uk-grid>
                <div class="uk-width-1-2">
                  <span>Quantity: {{item.quantity}}</span>
                </div>
                <div class="uk-width-1-2">
                  <span class="uk-text-bold">${{item.totalPrice}}</span>
                </div>
              </div>            
            </div>
            <span class="uk-text-meta">{{item.option}}</span>
          </div>
        </div>
      {{/each}}
      {{/with}}
      
    </div>
  </div>
  <div class="uk-width-2-5">
    <div class="uk-card uk-card-default uk-card-body uk-padding-small">
      <h4 class="uk-card-title uk-margin-small-bottom">Markets will charge this amount.</h4>  
      <hr class="uk-divider-icon uk-margin-small-bottom uk-margin-small-top">
      <div class="uk-grid-small" uk-grid>
        <div class="uk-width-1-2">
          <div class="">
            <span class="uk-text-small">Item Total ({{totalItemCount}}):</span>
          </div>
          <div class="">
            <span class="uk-text-small">Local Tax:</span>
          </div>
          <div class="">
            <span class="uk-text-small">Local Shipping Fee:</span>
          </div>        
        </div>
        <div class="uk-width-1-2">
          <div class="">
            <span class="uk-text-small">${{fmtTotalItemPrice}}</span>
          </div>
          <div class="">
            <span class="uk-text-small">to be decided</span>
          </div>
          <div class="">
            <span class="uk-text-small">to be decided</span>
          </div>
        </div>
      </div>
      <hr class="uk-divider-icon uk-margin-small-bottom uk-margin-small-top">
      <div class="uk-grid-small" uk-grid>
        <div class="uk-width-1-2">
          <div class="">
            <span class="uk-text-small">International Shipping Fee:</span>
          </div>
        </div>
        <div class="uk-width-1-2">
          <div class="">
            <span class="uk-text-small">to be decided</span>
          </div>
        </div>
        <button class="uk-button uk-button-primary uk-width-1-1" href="#modal-request" uk-toggle>Make an order request</button>
      </div>
    </div>
    {{#link-to 'cart'}}
      <button class="uk-button uk-button-link uk-align-right uk-margin-medium-top">Back to cart</button>
    {{/link-to}}
  </div>
</div>
<div id="modal-payment-delete" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">Headline</h2>
    <p>Are you sure you want to delete card information?</p>
    <p class="uk-text-center">
      <button {{action 'deletePayment'}} class="uk-button uk-button-primary" type="button">Ok</button>
      <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>          
    </p>
  </div>
</div>
<div id="modal-address-delete" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">Headline</h2>
    <p>Are you sure you want to delete this address?</p>
    <p class="uk-text-center">
      <button {{action 'deleteAddress'}} class="uk-button uk-button-primary uk-modal-close" type="button">Ok</button>
      <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>          
    </p>
  </div>
</div>
<div id="modal-request" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">Headline</h2>
    <p>Wrong information will lead to a order failure, so please make sure you review your information before you proceed.</p>
    <p class="uk-text-center">
      <button {{action 'requestOrder'}} class="uk-button uk-button-primary uk-modal-close" type="button">Ok</button>
      <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>          
    </p>
  </div>
</div>